name: Test Docker Container

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Build Docker image
      uses: docker/build-push-action@v2
      with:
        context: . # Le répertoire où se trouve le Dockerfile
        file: ./Dockerfile # Chemin vers votre Dockerfile
        push: false

    - name: Check if container is running
      run: |
        if docker ps -q --filter "name=h3_microservice-back-biblio-1" | grep -q .; then
          echo "Container is running"
        else
          echo "Container is not running"
          exit 1
        fi
